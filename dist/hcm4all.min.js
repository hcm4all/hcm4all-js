/*! hcm4all-js - v0.0.1 - 2015-05-28
* https://github.com/hcm4all/hcm4all-js
* Copyright (c) 2015 HCM4all GmbH; Licensed MIT */
(function(){var a,b,c,d,e,f,g,h,i,j,k=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},l={}.hasOwnProperty;j=this,i=function(){},h=function(){function a(a){this.callbacks=a,this.xhr=this.getHttpRequestObject()}return a.get=function(a,b){return new this(b).get(a)},a.prototype.getHttpRequestObject=function(){var a;return a=!1,window.XMLHttpRequest?a=new XMLHttpRequest:window.ActiveXObject&&(a=new ActiveXObject("Microsoft.XMLHTTP")),a},a.prototype.get=function(a){return this.xhr.open("GET",a,!0),this.xhr.onreadystatechange=this.readyStateChange.bind(this),this.xhr.send(),this.xhr},a.prototype.readyStateChange=function(){if(4===this.xhr.readyState)switch(this.xhr.status){case 200:return this.callbacks.success(JSON.parse(this.xhr.response),this.xhr);case 422:return this.callbacks.error(this.xhr)}},a}(),b={},"undefined"!=typeof HCM4allTestData?b.get=function(a,b){var c;return c=JSON.parse(HCM4allTestData[a.match(/\/(\w+)$/)[1]]),b.success(c,"success")}:"undefined"==typeof jQuery?b=h:b.get=function(a,b){return jQuery.getJSON(a,null,b.success).fail(b.error)},e=function(){function a(a,b){this.attributes=a,this.collection=b}return a.prototype.get=function(a){return this.attributes[a]},a}(),a=function(){function a(){this.models=[],this.init()}return a.prototype.model=e,a.prototype.init=function(){},a.prototype.url=function(){return HCM4all.baseUrl()+this.api+("?l="+HCM4all.defaults.language)},a.prototype.add=function(a){return this.models.push(new this.model(a,this))},a.prototype.fetch=function(a,c){return b.get(this.url(),{success:this.success.bind(this,a),error:this.error.bind(this,c)})},a.prototype.success=function(a,b,c){var d,e,f;for(this.models=[],e=0,f=b.length;f>e;e++)d=b[e],this.models.push(new this.model(d,this));a&&a.apply(null,[this,b,c])},a.prototype.error=function(a,b){return a?a.apply(null,[b,"error"]):void 0},a}(),c=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return k(b,a),b}(e),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.api="jobs",b.prototype.model=c,b}(a),f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return k(b,a),b}(e),g=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.api="positions",b.prototype.model=f,b.prototype.jobs=function(){var a,b,c,e,f,g,h,i,j;for(c=new d,i=this.models,a=0,f=i.length;f>a;a++)for(h=i[a],j=h.get("jobs"),e=0,g=j.length;g>e;e++)b=j[e],c.add(b);return c},b}(a),j.HCM4all=i,j.HCM4all=function(){function a(){}return a.defaults={baseUrl:"http://demo.hcm4all.de",language:"de",apiVersion:"v1"},a.config=function(a){var b,c;null==a&&(a={});for(b in a)c=a[b],this.defaults[b]=c},a.baseUrl=function(){return this.defaults.baseUrl+"/api/"+this.defaults.apiVersion+"/"},a.positions=function(a,b){return(new g).fetch(a,b)},a.jobs=function(a,b){return(new d).fetch(a,b)},a}(),j.HCM4all=HCM4all}).call(this);